--USE [ABECAS_GNC_TEST]
--GO

--/****** Object:  View [dbo].[VW_IMLOTVIEW2]    Script Date: 6/24/2021 4:15:58 PM ******/
--SET ANSI_NULLS ON
--GO

--SET QUOTED_IDENTIFIER ON
--GO

---HEADER
CREATE OR ALTER VIEW [dbo].[VW_IMLOTVIEW2]
AS
---SYSTEM
/*
 * Creaded By: ?
 * Created On: ?
 * Revisions:
 * - Saad Tahir   [2021/04/08] - added column OVERSELLPERCENTAGE
 * - Rossen Totev [2012/03/20] - added column R_LOT_SOURCE

 */

SELECT
  IMLot.ROWID,
  Convert(Integer, KEYSEQUENCE) as Keysequence,
  CREATIONDATETIME,
  CREATIONUSERID,
  LASTUPDATEDATETIME,
  LASTUPDATEUSERID,
  COMPANYID,
  MODULE,
  RECORDTYPE,
  R_ITEM,
  LOTCODE,
  DESCRIPTION_1,
  DESCRIPTION_2,
  STATUS,
  COMMENT,
  R_VENDOR,
  ROUTECODE,
  R_LOCATION,
  LOTSIZECODE,
  LOTPROJECTIONCODE,
  LOTUNITUOMFLAG,
  LOTUOMDEFAULT,
  LOTUNITSPERITEMUNIT,
  ROYALTYFLAG,
  ROYALTYUNITCOST,
  ROYALTYUNITPRICE,
  ROYALTYADDTOPRICEFLAG,
  STAGEFLAG,
  REORDERINVENTORYMINIMUMQTY,
  REORDERINVENTORYMAXIMUMQTY,
  REORDERQUANTITYEOQCALCULATED,
  REORDERQUANTITYORDERMULTIPLE,
  REORDERSAFETYQUANTITY,
  REORDERLEADTIME,
  COSTBASISMETHODFLAG,
  AVERAGECOST,
  STANDARDCOST,
  R_PRICETABLE,
  COREPRICE,
  MAXIMUMPRICELEVELFORDISCOUNT,
  TRADEDISCOUNTONSPECIALPRICE_AR,
  EARLYPAYDISCOUNTFLAG,
  COSTALLOCATIONFACTOR,
  DATEINTRODUCED,
  REORDERQUANTITYENTERED,
  DATEAVAILABLE,
  REORDERMETHODFLAG,
  DATEEXPIRATION,
  REORDERMINIMUMDAYSONHAND,
  USERDEFINEDCODE_1,
  REORDERMAXIMUMDAYSONHAND,
  USERDEFINEDCODE_2,
  CLASSCODE,
  USERDEFINEDCODE_3,
  SUBCLASSCODE,
  USERDEFINEDCODE_4,
  R_PRODUCTCATEGORY,
  USERDEFINEDCODE_5,
  R_OEMMANUFACTUREID,
  USERDEFINEDCODE_6,
  USERDEFINEDCODE_7,
  VENDORITEMCODE,
  USERDEFINEDCODE_8,
  PHYSICALCOUNTCODE,
  USERDEFINEDCODE_9,
  OEMMANUFACTURERCODE,
  USERDEFINEDCODE_10,
  USERDEFINEDREFERENCE_1,
  USERDEFINEDREFERENCE_2,
  USERDEFINEDREFERENCE_3,
  USERDEFINEDREFERENCE_4,
  USERDEFINEDREFERENCE_5,
  USERDEFINEDREFERENCE_6,
  USERDEFINEDREFERENCE_7,
  USERDEFINEDREFERENCE_8,
  USERDEFINEDREFERENCE_9,
  USERDEFINEDREFERENCE_10,
  USERDEFINEDDATE_1,
  USERDEFINEDDATE_2,
  USERDEFINEDDATE_3,
  USERDEFINEDDATE_4,
  USERDEFINEDDATE_5,
  USERDEFINEDDATE_6,
  USERDEFINEDDATE_7,
  USERDEFINEDDATE_8,
  USERDEFINEDDATE_9,
  USERDEFINEDDATE_10,
  USERDEFINEDQUANTITY_1,
  USERDEFINEDQUANTITY_2,
  USERDEFINEDQUANTITY_3,
  USERDEFINEDQUANTITY_4,
  USERDEFINEDQUANTITY_5,
  USERDEFINEDQUANTITY_6,
  USERDEFINEDQUANTITY_7,
  USERDEFINEDQUANTITY_8,
  USERDEFINEDQUANTITY_9,
  USERDEFINEDQUANTITY_10,
  INVENTORYUNITUOM,
  PIECESPERUNITUOM,
  PIECESPERUNITQUANTITY,
  UNITSPERPACKAGEUOM,
  UNITSPERPACKAGEQUANTITY,
  PACKAGESPERSHIPPINGUNITUOM,
  PACKAGESPERSHIPPINGUNITQTY,
  UNITVOLUMEUOM,
  UNITVOLUMEQUANTITY,
  UNITAREAUOM,
  UNITAREAQUANTITY,
  UNITVALUEUOM,
  NETWEIGHTUOM,
  NETWEIGHTQUANTITY,
  GROSSWEIGHTUOM,
  UNITVALUEQUANTITY,
  GROSSWEIGHTQUANTITY,
  isnull(VW_IMLotInventoryStatus.ON_HAND, 0) as ON_HAND,
  isnull(VW_IMLotInventoryStatus.IN_RECEIVING, 0) as IN_RECEIVING,
  isnull(VW_IMLotInventoryStatus.OUT_SHIPPED,0) as OUT_SHIPPED,
  isnull(VW_IMLotInventoryStatus.IN_UNAVAILABLE, 0) as IN_UNAVAILABLE,
  isnull(VW_IMLotInventoryStatus.OUT_UNAVAILABLE, 0) as OUT_UNAVAILABLE,
  isnull(VW_IMLotInventoryStatus.AVAILABLE, 0) as AVAILABLE,
  isnull(VW_IMLotInventoryStatus.IN_ORDERED,0) as IN_ORDERED,
  isnull(VW_IMLotInventoryStatus.OUT_ORDERED,0) as OUT_ORDERED,
  isnull(VW_IMLotInventoryStatus.IN_BACKORDER,0) as IN_BACKORDER,
  isnull(VW_IMLotInventoryStatus.OUT_BACKORDER,0) as OUT_BACKORDER,
  isnull(VW_IMLotInventoryStatus.NETAVAILABLE, 0) as NETAVAILABLE,
  isnull(VW_IMLotInventoryStatus.IN_FUTURE,0) as IN_FUTURE,
  isnull(VW_IMLotInventoryStatus.OUT_FUTURE, 0) as OUT_FUTURE,
  STORAGEBILLINGSTARTDATE,
  STORAGEBILLINGENDDATE,
  R_RATESCHEDULE,
  POPUPMESSAGE,
  LASTCOST,
  SIZE_1,
  R_BUYER,
  SIZE_2,
  STORAGEBILLEDDATE_LAST,
  STORAGEBILLEDDATE_NEXT,
  PRICESOURCE,
  PRICEMETHOD,
  CALCMETHOD,
  PRICELEVELA,
  PRICELEVELB,
  PRICELEVELC,
  PRICELEVELD,
  PRICELEVELE,
  R_GLDEPARTMENT,
  R_GLFUND,
  R_CAJOB,
  PRICEBASIS,
  R_FEES,
  ITEMSUPCCODE,
  RFRECEIPTVALIDATION,
  RFSHIPMENTVALIDATION,
  INTRANSACTIONNUMBER,
  DATELASTRECEIPT,
  R_PARTICIPANT,
  COMMISSIONBASIS,
  COMMISSIONAMOUNT,
  ROUNDINGMETHOD,
  ROUNDINGFACTOR,
  ALTERNATESTANDARDCOST,
  ALTERNATEAVERAGECOST,
  ALTERNATELASTCOST,
  PREVSTORAGEBILLEDDATE_LAST,
  PREVSTORAGEBILLEDDATE_NEXT,
  RECURRINGSTORAGE,
  R_LOT_SOURCE,
  OVERSELLPERCENTAGE
FROM dbo.IMLOT (NOLOCK)
  left outer join VW_IMLotInventoryStatus on VW_IMLotInventoryStatus.R_Lot = IMLOT.RowID
where IMLOT.MODULE in ('IM', 'PI', 'SI')
GO


